# ANTLR 简介

> ANTLR (另一个语言识别工具)是一个强大的编译器编译程式，
> 用于读取、处理、执行或翻译结构化文本或二进制文件。
> 它被广泛用于构建语言、工具和框架。

## 一、ANTLR demo

1、定义语法规则。要在 ANTLR4中定义自定义表达式，可以使用以下语法:

```antlr

expression
  :  primary (op primary)*
  ;

primary
  :  INT
  |  ID
  |  '(' expression ')'
  ;

op
  :  '+' | '-' | '*' | '/'
  ;
```

2、使用antlr解析语法规则生成词法分析器和语法分析器。

在此示例中，表达式规则定义了一个简单的算术表达式，
该表达式由一个或多个由 op 运算符分隔的主操作数组成。
主表达式可以是整数(INT)、标识符(ID)或括号中的其他表达式。
Op 规则定义了受支持的运算符，包括 + 、-、 * 和/。
然后，您可以使用这个表达式规则来解析和计算 
ANTLR4语法中的算术表达式。例如，输入(1 + 2) * 3将被解析为以下解析树

```java
public class Main {
    public static void main(String[] args) throws Exception {
        ANTLRInputStream input = new ANTLRInputStream("1+2*3");
        ExprLexer lexer = new ExprLexer(input);
        CommonTokenStream tokens = new CommonTokenStream(lexer);
        ExprParser parser = new ExprParser(tokens);
        ParseTree tree = parser.expression();
        System.out.println(tree.toStringTree(parser));
    }
}
```


```antlr
    *
   / \
  (   3
 / \
1   +
   / \
  2   3
```
