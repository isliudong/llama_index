```
/**
 * 下载网络图片并转换成base64
 *
 * @param url url
 * @return base64
 */
public String getImageByUrl(String url) {
    String imageType;
    String encode;
    //imageFeignClient远程调用
    Response response = imageFeignClient.downloadByUrl(URI.create(url));
    try (InputStream inputStream = response.body().asInputStream()) {
        imageType = (String) response.headers().get("content-type").toArray()[0];
        ByteArrayOutputStream data = new ByteArrayOutputStream();
        int len;
        byte[] buffer = new byte[response.body().length()];
        while ((len = inputStream.read(buffer)) != -1) {
            data.write(buffer, 0, len);
        }
        encode = Base64.getEncoder().encodeToString(data.toByteArray());
    } catch (Exception e) {
        throw new CommonException(e);
    }
    return "data:" + imageType + ";base64," + encode;
}
```