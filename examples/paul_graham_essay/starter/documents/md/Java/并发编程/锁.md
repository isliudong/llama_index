![image-20200707090750536](C:\Users\liudong\Documents\mdDocument\Java\并发编程\锁.assets\image-20200707090750536.png)

### ReentrantLock

<img src="C:\Users\liudong\AppData\Roaming\Typora\typora-user-images\image-20200502095946081.png" alt="image-20200502095946081" style="zoom: 67%;" />

+ 可重入

  从名字上理解，ReenTrantLock的字面意思就是再进入的锁，其实synchronized关键字所使用的锁也是可重入的，两者关于这个的区别不大。两者都是同一个线程没进入一次，锁的计数器都自增1，所以要等到锁的计数器下降为0时才能释放锁。

+ 调用lockInterruptibly()方法获取锁可打断

+ 锁超时

+ 支持公平锁

+ 条件变量:等待支持分类等待，而不是像synchronized所有等待在一起

### java锁机制主要在1.6进行了优化

锁膨胀过程：无锁→偏向锁（CAS检查对象头）→轻量级锁（CAS锁）→重量级锁（synchronized）

![img](C:\Users\liudong\Documents\mdDocument\Java\并发编程\锁.assets\20190717182101525.png)