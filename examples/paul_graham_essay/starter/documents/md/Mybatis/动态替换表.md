# 数据多表动态替换
> 下面是基于mybatis sql拦截器的实体发布态（实体对应的其他表）实现思路
## 1、EntityHelper初始化@Publish标注的实体
entityClassTableMap存储表与实体的关联信息
![image.png](http://150.158.17.182:8211/7632b480-d1fb-4740-96b4-c2a6917b8032.png)
发布态表后缀常量
![image.png](http://150.158.17.182:8211/32d2fa3b-f07c-40e1-87e3-d96b623f8851.png)
初始化表的发布态属性
![image.png](http://150.158.17.182:8211/02c60cfe-620f-454e-abf9-77b875e644b1.png)
![image.png](http://150.158.17.182:8211/e79f528d-8c5c-4096-a6b7-640fee132383.png)

## 2、PublishHelper动态替换sql实现实体发布态
初始化全局发布态的表对象
![image.png](http://150.158.17.182:8211/80f5892a-a162-4694-bcd4-1f9112b06699.png)
在获取发布态表对象
![image.png](http://150.158.17.182:8211/f3536852-9c5b-48b3-b1d3-f44a86752e29.png)

开启发布态查询
![image.png](http://150.158.17.182:8211/34574c62-7c0a-479a-8d3c-f33e6b685aee.png)
SQL操作替换表为对应的发布态表
![image.png](http://150.158.17.182:8211/b5cfd5ee-02cf-4f29-a8c2-df81aff36f39.png)